"use strict";(self.webpackChunktyping=self.webpackChunktyping||[]).push([["84"],{624:function(e,t,r){r.r(t),r.d(t,{default:()=>m});var a=r("881"),n=r("987"),o=r("946"),i=r("556");let s=r("701").Z.create({baseURL:`http://${window.location.hostname}:${window.location.port}`,timeout:5e3,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(Error(e.toString()))),s.interceptors.response.use(e=>e.data,e=>(console.error("HTTP Error:",e),Promise.reject(Error(e.toString()))));var l=r("200"),u=r("94"),p=r("151");let d={style:{margin:"8px"}},m={__name:"login",setup(e){let t=(0,u.oR)(),r=(0,i.tv)(),{t:m,locale:c}=(0,o.QT)(),g=(0,a.qj)({userName:"",password:""}),w=(0,a.iH)({userName:[{required:!0,message:m("inputUserName")},{regex:/^[A-Z]{2,5}$/,message:m("inputUserNameTip")}],password:[{required:!0,message:m("inputPassword")},{regex:/^.{6,30}$/,message:m("inputPasswordTip")}]}),v=(0,a.iH)(null),f=e=>{var t;null===(t=v.value)||void 0===t||t.validate(e)};(0,a.iH)("");let h=()=>{console.log("event cancel")},k=()=>{console.log("event ok")},y=(0,a.iH)(!1),b=()=>{var e;null===(e=v.value)||void 0===e||e.validate().then(async e=>{let{valid:a,errors:n}=e;if(a){y.value=!0;let e=s.post(p.y$.loginOrRegister,{userName:g.userName,password:g.password}),a=await e;if(y.value=!1,""===a.data){(0,l.vC)({title:m("tips"),content:m("userNameOrPasswordError"),noCancelBtn:!0,okText:m("confirm"),onCancel:h,onOk:k});return}await t.dispatch("updateToken",a.data),await r.push("/loading")}})};return(e,t)=>{let r=(0,a.up)("router-link"),o=(0,a.up)("nut-navbar"),i=(0,a.up)("nut-input"),s=(0,a.up)("nut-form-item"),l=(0,a.up)("nut-form"),u=(0,a.up)("nut-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o,{title:(0,a.SU)(m)("login")},{right:(0,a.w5)(()=>[(0,a.Wm)(r,{to:"/settings"},{default:(0,a.w5)(()=>[(0,a.Wm)((0,a.SU)(n.pE),{width:"16px"})]),_:1})]),_:1},8,["title"]),(0,a._)("div",d,[(0,a.Wm)(l,{ref_key:"formRef",ref:v,"model-value":g,rules:w.value},{default:(0,a.w5)(()=>[(0,a.Wm)(s,{label:(0,a.SU)(m)("userName"),prop:"userName"},{default:(0,a.w5)(()=>[(0,a.Wm)(i,{modelValue:g.userName,"onUpdate:modelValue":t[0]||(t[0]=e=>g.userName=e),clearable:"",onBlur:t[1]||(t[1]=e=>f("userName")),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),(0,a.Wm)(s,{label:(0,a.SU)(m)("password"),prop:"password"},{default:(0,a.w5)(()=>[(0,a.Wm)(i,{modelValue:g.password,"onUpdate:modelValue":t[2]||(t[2]=e=>g.password=e),clearable:"",type:"password"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model-value","rules"]),(0,a.Wm)(u,{type:"primary",block:"",loading:y.value,onClick:b},{default:(0,a.w5)(()=>[(0,a.Uk)((0,a.zw)((0,a.SU)(m)("login")),1)]),_:1},8,["loading"])])],64)}}}},151:function(e,t,r){r.d(t,{ZQ:function(){return s},bY:function(){return i},ot:function(){return o},y$:function(){return n}});var a=r(438);let n={kick:"/api/kick",refreshGame:"/api/refreshGame",heart:"/api/heart",loginOrRegister:"/api/loginOrRegister",entryGame:"/api/entryGame",gameUserHistory:"/api/gameUserHistory",submit:"/api/submit",getEditStatus:"/api/getEditStatus",getSegmentContent:"/api/getSegmentContent",setSegmentContent:"/api/setSegmentContent"};class o{static from(e){let t=new o;return t.list=e.list,t}constructor(){(0,a._)(this,"list",void 0),this.list=[]}}class i{static from(e){let t=new i;return t.gameId=e.gameId||0,t.prevId=e.prevId||0,t.input=e.input||"",t}constructor(){(0,a._)(this,"gameId",void 0),(0,a._)(this,"prevId",void 0),(0,a._)(this,"input",void 0),this.gameId=0,this.prevId=0,this.input=""}}class s{static from(e){let t=new s;return t.content=e.content||0,t}constructor(){(0,a._)(this,"content",void 0),this.content=""}}}}]);