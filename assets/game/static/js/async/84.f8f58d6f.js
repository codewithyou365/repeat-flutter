"use strict";(self.webpackChunktyping=self.webpackChunktyping||[]).push([["84"],{624:function(e,t,a){a.r(t),a.d(t,{default:()=>p});var r=a("881"),s=a("987"),n=a("946"),o=a("556");let l=a("384").Z.create({baseURL:`http://${window.location.hostname}:${window.location.port}`,timeout:5e3,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(Error(e.toString()))),l.interceptors.response.use(e=>e.data,e=>(console.error("HTTP Error:",e),Promise.reject(Error(e.toString()))));var i=a("94"),u=a("151");let d={style:{margin:"8px"}},p={__name:"login",setup(e){let t=(0,i.oR)(),a=(0,o.tv)(),{t:p,locale:m}=(0,n.QT)(),c=(0,r.qj)({userName:"",password:"",newPassword:""}),w=(0,r.iH)(!1),g=(0,r.iH)(!1),v=(0,r.iH)(""),f=(0,r.iH)({userName:[{required:!0,message:p("inputUserName")},{regex:/^[A-Z]{2,5}$/,message:p("inputUserNameTip")}],password:[{required:!0,message:p("inputPassword")},{regex:/^.{6,30}$/,message:p("inputPasswordTip")}],newPassword:[{required:!0,message:p("inputPassword")},{regex:/^.{6,30}$/,message:p("inputPasswordTip")}]}),h=(0,r.iH)(null),b=e=>{var t;null===(t=h.value)||void 0===t||t.validate(e)};(0,r.iH)("");let k=()=>{console.log("event cancel")},U=()=>{console.log("event ok")},y=(0,r.iH)(!1),P=()=>{var e;null===(e=h.value)||void 0===e||e.validate().then(async e=>{let{valid:r,errors:s}=e;if(r){y.value=!0;let e=l.post(u.y$.loginOrRegister,{userName:c.userName,password:c.password,newPassword:c.newPassword}),r=await e;if(y.value=!1,""===r.data){g.value=!0,"needToResetPassword"===r.error?(w.value=!0,v.value=p("setNewPassword")):"excessRegisterCount"===r.error?v.value=p("excessRegisterCount"):v.value=p("userNameOrPasswordError");return}await t.dispatch("updateToken",r.data),await a.push("/loading")}})};return(e,t)=>{let a=(0,r.up)("router-link"),n=(0,r.up)("nut-navbar"),o=(0,r.up)("nut-input"),l=(0,r.up)("nut-form-item"),i=(0,r.up)("nut-form"),u=(0,r.up)("nut-button"),m=(0,r.up)("nut-dialog");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(n,{title:(0,r.SU)(p)("login")},{right:(0,r.w5)(()=>[(0,r.Wm)(a,{to:"/settings"},{default:(0,r.w5)(()=>[(0,r.Wm)((0,r.SU)(s.pE),{width:"16px"})]),_:1})]),_:1},8,["title"]),(0,r._)("div",d,[(0,r.Wm)(i,{ref_key:"formRef",ref:h,"model-value":c,rules:f.value},{default:(0,r.w5)(()=>[(0,r.Wm)(l,{label:(0,r.SU)(p)("userName"),prop:"userName"},{default:(0,r.w5)(()=>[(0,r.Wm)(o,{modelValue:c.userName,"onUpdate:modelValue":t[0]||(t[0]=e=>c.userName=e),clearable:"",onBlur:t[1]||(t[1]=e=>b("userName")),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),(0,r.Wm)(l,{label:(0,r.SU)(p)("password"),prop:"password"},{default:(0,r.w5)(()=>[(0,r.Wm)(o,{modelValue:c.password,"onUpdate:modelValue":t[2]||(t[2]=e=>c.password=e),clearable:"",type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),w.value?((0,r.wg)(),(0,r.j4)(l,{key:0,label:(0,r.SU)(p)("newPassword"),prop:"newPassword"},{default:(0,r.w5)(()=>[(0,r.Wm)(o,{modelValue:c.newPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>c.newPassword=e),clearable:"",type:"password"},null,8,["modelValue"])]),_:1},8,["label"])):(0,r.kq)("",!0)]),_:1},8,["model-value","rules"]),(0,r.Wm)(u,{type:"primary",block:"",loading:y.value,onClick:P},{default:(0,r.w5)(()=>[(0,r.Uk)((0,r.zw)((0,r.SU)(p)("login")),1)]),_:1},8,["loading"])]),(0,r.Wm)(m,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=e=>g.value=e),title:(0,r.SU)(p)("tips"),content:v.value,okText:(0,r.SU)(p)("confirm"),"no-cancel-btn":!0,cancelText:(0,r.SU)(p)("cancel"),onOk:U,onCancel:k},null,8,["visible","title","content","okText","cancelText"])],64)}}}},151:function(e,t,a){a.d(t,{ZQ:function(){return u},_q:function(){return i},bY:function(){return l},ot:function(){return o},y$:function(){return n}});var r,s=a(438);let n={kick:"/api/kick",refreshGame:"/api/refreshGame",heart:"/api/heart",loginOrRegister:"/api/loginOrRegister",entryGame:"/api/entryGame",gameUserHistory:"/api/gameUserHistory",submit:"/api/submit",getEditStatus:"/api/getEditStatus",getSegmentContent:"/api/getSegmentContent",setSegmentContent:"/api/setSegmentContent"};class o{static from(e){let t=new o;return t.list=e.list,t.tips=e.tips,t}constructor(){(0,s._)(this,"list",void 0),(0,s._)(this,"tips",void 0),this.list=[],this.tips=[]}}class l{static from(e){let t=new l;return t.gameId=e.gameId||0,t.prevId=e.prevId||0,t.input=e.input||"",t}constructor(){(0,s._)(this,"gameId",void 0),(0,s._)(this,"prevId",void 0),(0,s._)(this,"input",void 0),this.gameId=0,this.prevId=0,this.input=""}}var i=((r={})[r.word=0]="word",r[r.single=1]="single",r[r.all=2]="all",r);class u{static from(e){let t=new u;return t.content=e.content||0,t}constructor(){(0,s._)(this,"content",void 0),this.content=""}}}}]);